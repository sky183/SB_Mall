<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="com.sb.mall.crowd.dao.CrowdDao">
	
	<insert id="insertCrowdBoard"
		parameterType="com.sb.mall.crowd.model.CrowdBoard"
		useGeneratedKeys="true" keyColumn="crowdBoardSeq" keyProperty="crowdBoardSeq">
		
	insert into CrowdBoard (userSeq,title,text,writeDate,salesDay,targetPrice)
	value(#{userSeq},#{title},#{text},#{writeDate},#{salesDay},#{targetPrice})
	
	</insert>
	
	<insert id="insertCrowdProduct"
		parameterType="com.sb.mall.crowd.model.CrowdProduct"
		useGeneratedKeys="true" keyColumn="crProductSeq" keyProperty="crProductSeq">
		
		insert into CrowdProduct (crowdBoardSeq, productNo, crPrice,crProductName,crPhoto,crDetail) 
 		value(#{crowdBoardSeq},#{productNo}, #{crPrice},#{crProductName},#{crPhoto},#{crDetail})
 		
	</insert>
	
	<insert id="insertCrowdProductNull"
		parameterType="com.sb.mall.crowd.model.CrowdProduct"
		useGeneratedKeys="true" keyColumn="crProductSeq" keyProperty="crProductSeq">
		
		insert into CrowdProduct (crowdBoardSeq, productNo, crPrice,crProductName,crDetail) 
 		value(#{crowdBoardSeq},#{productNo}, #{crPrice},#{crProductName},#{crDetail})
 		
	</insert>
	
	<insert id="insertCrowdGoods"
		parameterType="com.sb.mall.crowd.model.CrowdGoods">
		
		insert into CrowdGoods (crGoodsNo,crProductSeq,crGoodsName,crGoodsPrice,crGoodsPhoto) 
 		value(#{crGoodsNo},#{crProductSeq},#{crGoodsName},#{crGoodsPrice},#{crGoodsPhoto})
		
	</insert>
	
	<insert id="insertCrowdOption"
		parameterType="com.sb.mall.crowd.model.CrowdOption">
		
		insert into CrowdGoodsOption (crGoodsNo,crOpt1Name,crOptAmount,crOpt1Price,crOpt2Name,crOpt2Price) 
 		value(#{crGoodsNo},#{crOpt1Name},#{crOptAmount},#{crOpt1Price},#{crOpt2Name},#{crOpt2Price})
		
	</insert>
	
	<insert id="insertCrProductPhoto" parameterType="com.sb.mall.crowd.model.CrowdProductPhoto">
		insert into CrowdProductPhoto (productNo,crPhotoList) value(#{productNo},#{crPhotoList})
	</insert>
	
	<select id="selectCrowdBoard" resultType="map">
		select * from CrowdBoard b,CrowdProduct p where b.crowdBoardSeq = p.crowdBoardSeq order by writeDate desc limit #{param1},#{param2}
	</select>
	
	<select id="getBoardPageCnt" resultType="int">
		select count(*) from CrowdBoard
	</select>
	
	<!-- <select id="selectOrder">
		
	</select> -->
	
	
	
	
	
	
</mapper>