<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.sb.mall.admin.adminStatistics.dao.AdminStatisticsDao">

	<!-- loadVisitStatReport.jsp 에서 사용할 쿼리 -->
<!-- 	오늘의 방문, 월 방문, 연간 방문 -->
	<select id="getVisitStatVO" resultType="com.sb.mall.admin.adminStatistics.model.VisitStatVO">
		select
		max(dayCount) as dayCount,
		max(monthCount) as monthCount,
		max(yearCount) as yearCount
		from
		(SELECT
		ifnull(sum(visitCount), 0) as dayCount,
		0 as monthCount,
		0 as yearCount
		FROM
		SB_Master.VisitGuest
		where date(visitDate) = date('2018.12.12')
		union all
		SELECT
		0 as dayCount,
		ifnull(sum(visitCount), 0) as monthCount,
		0 as yearCount
		FROM
		SB_Master.VisitGuest
		where date_format(visitDate, '%Y.%m') = date_format('2018.12.12', '%Y.%m')
		union all
		SELECT
		0 as dayCount,
		0 as monthCount,
		ifnull(sum(visitCount), 0) as yearCount
		FROM
		SB_Master.VisitGuest
		where year(visitDate) = year('2018.12.12')) R;
	</select>








</mapper> 
 
